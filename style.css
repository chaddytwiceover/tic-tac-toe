/* /style.css - v3.0 Repolished UI/UX */
/* 
  Neural Grid Challenge - Cyberpunk Tic Tac Toe
  Features: Smooth animations, enhanced visual hierarchy, improved accessibility,
  responsive design with consistent spacing and refined color scheme.
*/
:root{
  /* Enhanced Color Palette */
  --bg-primary:#0a0a0f;
  --bg-secondary:#1a1a2e;
  --bg-tertiary:#16213e;
  
  /* Neon Colors */
  --neon-cyan:#00e6ff;
  --neon-cyan-soft:#4df4ff;
  --neon-magenta:#ff0080;
  --neon-magenta-soft:#ff4da6;
  --neon-yellow:#ffea00;
  --neon-green:#39ff14;
  
  /* Text Colors */
  --text-primary:#ffffff;
  --text-secondary:rgba(255,255,255,.85);
  --text-muted:rgba(255,255,255,.6);
  --text-accent:#b3b3ff;
  
  /* UI Elements */
  --border-color:rgba(0,230,255,.2);
  --border-color-hover:rgba(0,230,255,.4);
  --surface-bg:rgba(255,255,255,.04);
  --surface-bg-hover:rgba(0,230,255,.08);
  --surface-bg-active:rgba(0,230,255,.12);
  
  /* Sizing & Spacing */
  --radius-sm:8px;
  --radius-md:12px;
  --radius-lg:16px;
  --spacing-xs:.5rem;
  --spacing-sm:.75rem;
  --spacing-md:1rem;
  --spacing-lg:1.5rem;
  --spacing-xl:2rem;
  
  /* Shadows */
  --shadow-subtle:0 2px 8px rgba(0,0,0,.15);
  --shadow-elevated:0 8px 32px rgba(0,0,0,.3);
  --glow-cyan:0 0 20px rgba(0,230,255,.3);
  --glow-magenta:0 0 20px rgba(255,0,128,.3);
}

*{box-sizing:border-box;margin:0;padding:0}

html,body{height:100%}

body{
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  color:var(--text-secondary);
  background:linear-gradient(135deg,var(--bg-primary) 0%,var(--bg-secondary) 50%,var(--bg-tertiary) 100%);
  background-attachment:fixed;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  min-height:100vh;
  padding:var(--spacing-md);
  display:flex;
  align-items:center;
  justify-content:center;
  line-height:1.6;
}

.backdrop{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
  overflow:hidden;
  background:
    radial-gradient(circle at 20% 20%,rgba(0,230,255,.08) 0%,transparent 50%),
    radial-gradient(circle at 80% 80%,rgba(255,0,128,.06) 0%,transparent 50%),
    radial-gradient(circle at 40% 60%,rgba(255,234,0,.04) 0%,transparent 40%);
  animation:shiftBg 20s ease-in-out infinite alternate;
}

@keyframes shiftBg{
  0%{transform:rotate(0deg) scale(1)}
  100%{transform:rotate(2deg) scale(1.05)}
}

.container{
  position:relative;
  z-index:10;
  max-width:680px;
  width:100%;
  margin:0 auto;
  text-align:center;
  background:rgba(26,26,46,.6);
  border:1px solid var(--border-color);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border-radius:var(--radius-lg);
  padding:var(--spacing-xl);
  box-shadow:var(--shadow-elevated),inset 0 1px 0 rgba(255,255,255,.08);
  transition:border-color .3s ease,box-shadow .3s ease;
}

.container:hover{
  border-color:var(--border-color-hover);
  box-shadow:var(--shadow-elevated),var(--glow-cyan),inset 0 1px 0 rgba(255,255,255,.08);
}

main {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.game-area {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.sidebar {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

header{
  margin-bottom:var(--spacing-lg);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:var(--spacing-md);
  flex-wrap:wrap;
}

.brand h1{
  font-family:'Orbitron',monospace;
  color:var(--neon-cyan);
  text-shadow:0 0 20px rgba(0,230,255,.4),0 0 40px rgba(0,230,255,.2);
  font-size:clamp(1.5rem,3vw,2.2rem);
  font-weight:700;
  letter-spacing:2px;
  text-align:left;
  margin-bottom:var(--spacing-xs);
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-cyan-soft));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.brand p{
  color:var(--text-muted);
  font-size:clamp(.85rem,2vw,1rem);
  text-align:left;
  font-weight:400;
  letter-spacing:.5px;
}

.brand .version{
  color:var(--neon-yellow);
  font-weight:600;
  text-shadow:0 0 10px rgba(255,234,0,.5);
}

.back-link{
  color:var(--text-accent);
  text-decoration:none;
  font-size:.95rem;
  padding:var(--spacing-xs) var(--spacing-sm);
  border-radius:var(--radius-sm);
  background:var(--surface-bg);
  border:1px solid var(--border-color);
  transition:all .3s ease;
  font-weight:500;
}

.back-link:hover{
  color:var(--neon-cyan);
  background:var(--surface-bg-hover);
  border-color:var(--neon-cyan);
  text-shadow:0 0 10px var(--neon-cyan);
  transform:translateX(-2px);
}

.controls{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:var(--spacing-md);
  margin-bottom:var(--spacing-lg);
  padding:var(--spacing-md);
  background:var(--surface-bg);
  border-radius:var(--radius-md);
  border:1px solid var(--border-color);
}

.difficulty-selector{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:var(--spacing-sm);
  font-family:'Orbitron',monospace;
}

.difficulty-label{
  color:var(--neon-yellow);
  font-size:.9rem;
  font-weight:600;
  letter-spacing:1px;
  text-shadow:0 0 10px rgba(255,234,0,.3);
  margin-bottom:var(--spacing-xs);
}

.radio-group{
  display:flex;
  align-items:center;
  width:100%;
  justify-content:center;
  margin-bottom:var(--spacing-xs);
}

.radio-group input[type="radio"]{
  opacity:0;
  position:absolute;
  width:0;
  height:0;
}

.radio-group label{
  background:var(--surface-bg);
  color:var(--text-secondary);
  padding:var(--spacing-sm) var(--spacing-md);
  border-radius:var(--radius-sm);
  border:1px solid var(--border-color);
  cursor:pointer;
  transition:all .3s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  font-weight:500;
  font-size:.85rem;
  letter-spacing:.5px;
  min-width:90px;
  text-align:center;
  overflow:hidden;
}

.radio-group label::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta));
  opacity:0;
  transition:opacity .3s ease;
  z-index:-1;
}

.radio-group label:hover{
  border-color:var(--neon-cyan);
  background:var(--surface-bg-hover);
  transform:translateY(-1px);
  box-shadow:var(--shadow-subtle);
}

.radio-group input[type="radio"]:checked + label{
  background:transparent;
  color:var(--text-primary);
  border-color:var(--neon-cyan);
  box-shadow:var(--glow-cyan);
  font-weight:600;
  transform:translateY(-2px);
}

.radio-group input[type="radio"]:checked + label::before{
  opacity:1;
}

.scoreboard{
  display:flex;
  justify-content:center;
  gap:var(--spacing-md);
  flex-wrap:wrap;
  margin-bottom:var(--spacing-lg);
  padding:var(--spacing-md);
  background:rgba(255,255,255,.02);
  border-radius:var(--radius-md);
  border:1px solid rgba(0,230,255,.1);
}

.chip{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:var(--spacing-xs);
  padding:var(--spacing-sm) var(--spacing-md);
  border-radius:var(--radius-md);
  border:1px solid var(--border-color);
  background:var(--surface-bg);
  transition:all .3s ease;
  min-width:80px;
  position:relative;
  overflow:hidden;
}

.chip::before{
  content:'';
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:2px;
  background:linear-gradient(90deg,var(--neon-cyan),var(--neon-magenta));
  opacity:.3;
}

.chip:hover{
  background:var(--surface-bg-hover);
  border-color:var(--border-color-hover);
  transform:translateY(-1px);
  box-shadow:var(--shadow-subtle);
}

.score-label{
  font-family:'Orbitron',monospace;
  color:var(--text-accent);
  font-size:.75rem;
  font-weight:500;
  letter-spacing:.5px;
  text-transform:uppercase;
}

.score-value{
  font-weight:700;
  color:var(--text-primary);
  font-size:1.2rem;
  text-shadow:0 0 10px rgba(255,255,255,.3);
}

.board-wrapper{
  position:relative;
  width:100%;
  max-width:520px;
  margin:0 auto;
  aspect-ratio:1/1;
  max-height:min(520px,calc(100vh - 16rem));
  padding:var(--spacing-sm);
  background:rgba(255,255,255,.02);
  border-radius:var(--radius-lg);
  border:2px solid var(--border-color);
  box-shadow:inset 0 0 20px rgba(0,230,255,.1);
  transition:border-color .3s ease,box-shadow .3s ease;
}

.board-wrapper:hover{
  border-color:var(--border-color-hover);
  box-shadow:inset 0 0 30px rgba(0,230,255,.15),var(--glow-cyan);
}

.board{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  grid-template-rows:repeat(3,1fr);
  gap:clamp(8px,1.5vw,14px);
  width:100%;
  height:100%;
  padding:var(--spacing-xs);
}

/* Game cells with enhanced interactivity */
.cell{
  appearance:none;
  -webkit-appearance:none;
  border:2px solid var(--border-color);
  background:var(--surface-bg);
  border-radius:var(--radius-md);
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Orbitron',monospace;
  font-size:clamp(1.6rem,6.5vw,3.5rem);
  font-weight:700;
  transition:all .25s cubic-bezier(0.4,0,0.2,1);
  color:var(--text-primary);
  user-select:none;
  min-width:0;
  min-height:0;
  position:relative;
  overflow:hidden;
}

.cell::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,
    rgba(0,230,255,.05) 0%,
    rgba(255,0,128,.05) 50%,
    rgba(0,230,255,.05) 100%);
  opacity:0;
  transition:opacity .3s ease;
  z-index:0;
}

.cell:not(.x):not(.o):hover{
  background:var(--surface-bg-hover);
  border-color:var(--neon-cyan);
  box-shadow:var(--glow-cyan);
  transform:translateY(-3px) scale(1.02);
}

.cell:not(.x):not(.o):hover::before{
  opacity:1;
}

.cell:focus-visible{
  outline:2px solid var(--neon-yellow);
  outline-offset:2px;
  box-shadow:0 0 0 4px rgba(255,234,0,.2);
}

.cell.clicked{
  animation:cellPulse .3s cubic-bezier(0.4,0,0.2,1);
}

@keyframes cellPulse{
  0%{transform:scale(1)}
  50%{transform:scale(.92)}
  100%{transform:scale(1)}
}

.cell.x{
  color:var(--neon-cyan);
  text-shadow:0 0 15px var(--neon-cyan),0 0 30px rgba(0,230,255,.5);
  border-color:var(--neon-cyan);
  background:rgba(0,230,255,.08);
}

.cell.o{
  color:var(--neon-magenta);
  text-shadow:0 0 15px var(--neon-magenta),0 0 30px rgba(255,0,128,.5);
  border-color:var(--neon-magenta);
  background:rgba(255,0,128,.08);
}

.winning-line{
  position:absolute;background-color:var(--neon-cyan);height:4px;border-radius:3px;display:none;
  transform-origin:center;transition:all .3s ease;z-index:5;pointer-events:none;
}
.winning-line.show{display:block}
.winning-line.o-win{background-color:var(--neon-magenta);box-shadow:0 0 12px var(--neon-magenta),0 0 24px var(--neon-magenta)}
.winning-line.x-win{background-color:var(--neon-cyan);box-shadow:0 0 12px var(--neon-cyan),0 0 24px var(--neon-cyan)}

/* Improved animations for consistent line drawing */
@keyframes lineDrawHorizontal{
  from{transform:scaleX(0)}
  to{transform:scaleX(1)}
}
@keyframes lineDrawVertical{
  from{transform:scaleY(0)}
  to{transform:scaleY(1)}
}
@keyframes lineDrawDiagonal{
  from{transform:translateY(-50%) rotate(var(--rotation)) scaleX(0)}
  to{transform:translateY(-50%) rotate(var(--rotation)) scaleX(1)}
}

/* Horizontal lines (rows) - Improved positioning */
.winning-line.win-0{
  top:calc(16.67% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-1{
  top:calc(50% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-2{
  top:calc(83.33% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-0.show,.winning-line.win-1.show,.winning-line.win-2.show{
  animation:lineDrawHorizontal .5s cubic-bezier(0.4,0,0.2,1) forwards;
}

/* Vertical lines (columns) - Improved positioning */
.winning-line.win-3{
  left:calc(16.67% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-4{
  left:calc(50% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-5{
  left:calc(83.33% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-3.show,.winning-line.win-4.show,.winning-line.win-5.show{
  animation:lineDrawVertical .5s cubic-bezier(0.4,0,0.2,1) forwards;
}

/* Diagonal lines - Fixed positioning and consistent animation */
.winning-line.win-6{
  width:calc(100% * 1.414);height:4px;top:50%;left:50%;
  --rotation:45deg;
  transform:translateX(-50%) translateY(-50%) rotate(45deg) scaleX(0);
  transform-origin:center;
}
.winning-line.win-7{
  width:calc(100% * 1.414);height:4px;top:50%;left:50%;
  --rotation:-45deg;
  transform:translateX(-50%) translateY(-50%) rotate(-45deg) scaleX(0);
  transform-origin:center;
}
.winning-line.win-6.show{
  animation:lineDrawHorizontal .6s cubic-bezier(0.4,0,0.2,1) forwards;
}
.winning-line.win-7.show{
  animation:lineDrawHorizontal .6s cubic-bezier(0.4,0,0.2,1) forwards;
}

.status-display{
  margin-top:var(--spacing-lg);
  font-size:clamp(1rem,2.5vw,1.2rem);
  color:var(--neon-yellow);
  text-shadow:0 0 10px rgba(255,234,0,.4);
  min-height:2.5rem;
  letter-spacing:1px;
  font-weight:500;
  padding:var(--spacing-sm) var(--spacing-md);
  background:rgba(255,234,0,.05);
  border-radius:var(--radius-md);
  border:1px solid rgba(255,234,0,.2);
  animation:statusPulse 2s ease-in-out infinite alternate;
  display:flex;
  align-items:center;
  justify-content:center;
}

@keyframes statusPulse{
  from{
    text-shadow:0 0 10px rgba(255,234,0,.4);
    border-color:rgba(255,234,0,.2);
  }
  to{
    text-shadow:0 0 20px rgba(255,234,0,.6),0 0 40px rgba(255,234,0,.3);
    border-color:rgba(255,234,0,.4);
  }
}

.status-display.win{
  color:var(--neon-cyan);
  background:rgba(0,230,255,.08);
  border-color:var(--neon-cyan);
  text-shadow:0 0 15px var(--neon-cyan),0 0 30px rgba(0,230,255,.4);
  animation:statusWin 1s ease-in-out infinite alternate;
}

.status-display.draw{
  color:var(--neon-magenta);
  background:rgba(255,0,128,.08);
  border-color:var(--neon-magenta);
  text-shadow:0 0 15px var(--neon-magenta),0 0 30px rgba(255,0,128,.4);
  animation:statusDraw 1s ease-in-out infinite alternate;
}

@keyframes statusWin{
  from{
    text-shadow:0 0 15px var(--neon-cyan),0 0 30px rgba(0,230,255,.4);
    box-shadow:var(--glow-cyan);
  }
  to{
    text-shadow:0 0 25px var(--neon-cyan),0 0 50px rgba(0,230,255,.6);
    box-shadow:0 0 30px rgba(0,230,255,.5);
  }
}

@keyframes statusDraw{
  from{
    text-shadow:0 0 15px var(--neon-magenta),0 0 30px rgba(255,0,128,.4);
    box-shadow:var(--glow-magenta);
  }
  to{
    text-shadow:0 0 25px var(--neon-magenta),0 0 50px rgba(255,0,128,.6);
    box-shadow:0 0 30px rgba(255,0,128,.5);
  }
}

.actions{
  display:flex;
  gap:var(--spacing-md);
  justify-content:center;
  margin-top:var(--spacing-lg);
  flex-wrap:wrap;
}

.action-button{
  font-family:'Orbitron',monospace;
  font-weight:600;
  font-size:.95rem;
  border:0;
  padding:var(--spacing-sm) var(--spacing-lg);
  border-radius:var(--radius-md);
  cursor:pointer;
  transition:all .3s cubic-bezier(0.4,0,0.2,1);
  text-transform:uppercase;
  letter-spacing:1px;
  position:relative;
  overflow:hidden;
  min-width:140px;
}

.action-button::before{
  content:'';
  position:absolute;
  inset:0;
  border-radius:inherit;
  padding:2px;
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-magenta));
  mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  mask-composite:xor;
  -webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;
}

.action-button.primary{
  background:linear-gradient(135deg,var(--neon-cyan),var(--neon-cyan-soft));
  color:#0a0a0f;
  box-shadow:var(--glow-cyan);
  font-weight:700;
}

.action-button.primary:hover{
  transform:translateY(-3px) scale(1.05);
  box-shadow:0 10px 30px rgba(0,230,255,.3),var(--glow-cyan);
  background:linear-gradient(135deg,var(--neon-cyan-soft),var(--neon-cyan));
}

.action-button.secondary{
  background:var(--surface-bg);
  color:var(--text-primary);
  border:2px solid var(--border-color);
}

.action-button.secondary::before{
  display:none;
}

.action-button.secondary:hover{
  background:var(--surface-bg-hover);
  border-color:var(--neon-magenta);
  color:var(--neon-magenta);
  transform:translateY(-2px);
  box-shadow:var(--glow-magenta);
}

.action-button:focus-visible{
  outline:2px solid var(--neon-yellow);
  outline-offset:3px;
  box-shadow:0 0 0 4px rgba(255,234,0,.2);
}

.action-button:active{
  transform:translateY(0) scale(.98);
}

@media (min-width: 768px) {
  .container {
    max-width: 960px;
  }
  main {
    flex-direction: row;
    align-items: flex-start;
  }
  .game-area {
    flex: 2; /* Takes up 2/3 of the space */
  }
  .sidebar {
    flex: 1; /* Takes up 1/3 of the space */
    position: sticky;
    top: var(--spacing-xl);
  }
  .board-wrapper {
    max-width: none; /* Allow it to fill the game-area */
  }
}

@media (max-width:560px){
  body{padding:var(--spacing-sm)}
  .container{padding:var(--spacing-md)}
  .controls{grid-template-columns:1fr;gap:var(--spacing-sm)}
  .scoreboard{gap:var(--spacing-sm)}
  .actions{flex-direction:column;align-items:center}
  .action-button{min-width:200px}
}

/* Additional responsive tweaks for very small and very tall/narrow screens */
@media (max-width:420px){
  .brand h1{font-size:1.4rem}
  .brand p{font-size:.85rem}
  .controls{padding:var(--spacing-sm);gap:var(--spacing-xs)}
  .difficulty-selector{gap:var(--spacing-xs)}
  .scoreboard{gap:var(--spacing-xs);padding:var(--spacing-sm)}
  .board-wrapper{
    max-width:min(92vw,400px);
    max-height:calc(100vh - 8rem);
    padding:var(--spacing-xs);
  }
  .board{gap:clamp(6px,2vw,10px)}
  .cell{font-size:clamp(1.4rem,9vw,2.8rem)}
  .container{padding:var(--spacing-sm)}
  .status-display{font-size:.9rem;padding:var(--spacing-xs) var(--spacing-sm)}
  
  /* Adjust winning line thickness for smaller screens */
  .winning-line{height:3px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:3px}
}

@media (min-height:720px) and (max-width:900px){
  /* Give the board more room on taller narrow screens */
  .board-wrapper{max-height:calc(100vh - 8rem)}
  .container{padding:var(--spacing-lg) var(--spacing-md)}
}

/* Production improvements for very small screens */
@media (max-width:360px){
  .winning-line{height:2px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:2px}
  .container{margin:var(--spacing-xs)}
  .brand h1{font-size:1.2rem}
  .brand p{font-size:.8rem}
  .action-button{min-width:120px;font-size:.85rem}
}

/* High DPI display improvements */
@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){
  .winning-line{height:5px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:5px}
}

/* Dark mode preference support */
@media (prefers-color-scheme:light){
  :root{
    --text-primary:#ffffff;
    --text-secondary:rgba(255,255,255,.9);
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{
    animation-duration:.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:.01ms !important;
  }
  
  .backdrop{
    animation:none;
  }
}

/* Enhanced focus visibility for better accessibility */
@media (prefers-reduced-motion:no-preference){
  .cell:focus-visible{
    animation:focusPulse 1s ease-in-out infinite alternate;
  }
}

@keyframes focusPulse{
  from{box-shadow:0 0 0 4px rgba(255,234,0,.2)}
  to{box-shadow:0 0 0 4px rgba(255,234,0,.4)}
}

/* Ensure winning line scales and stays visible on all screen sizes */
.board-wrapper{
  position:relative;
  isolation:isolate; /* Create stacking context */
}

/* Performance optimization - GPU acceleration for animations */
.winning-line,.cell,.action-button{
  will-change:transform;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
}

/* Remove will-change after animations complete to optimize performance */
.winning-line:not(.show),.cell:not(.clicked),.action-button:not(:hover){
  will-change:auto;
}

/* Print styles for documentation */
@media print{
  .backdrop{display:none}
  .container{
    background:white;
    color:black;
    border:2px solid black;
    box-shadow:none;
  }
  .actions{display:none}
}

