/* /style.css - v3.0 Production Refactor */
/* Responsive adjustments:
  - Board and container constrained with `max-height` to fit viewport
  - Gaps and font-sizes use `clamp()` to scale between small and large screens
  - Extra breakpoints for very small widths and tall narrow screens
  - Adjusted cell font-size and gap to avoid overflow on small devices
  - Fixed winning line positioning and animations for consistency
  Preview: open `index.html` and resize browser or use device toolbar in devtools.
*/
:root{
  --bg-1:#020312;--bg-2:#07102a;
  --neon-cyan:#00f0ff;--neon-magenta:#ff2dcb;--neon-yellow:#fefc4d;
  --muted:rgba(255,255,255,.78);
  --radius:14px;--border-color:rgba(0,240,255,.15);
  --cell-bg:rgba(255,255,255,.05);--cell-bg-hover:rgba(0,240,255,.08);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Inter',system-ui,sans-serif;color:var(--muted);
  background:linear-gradient(180deg,var(--bg-1) 0%,var(--bg-2) 60%);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  min-height:100vh;padding:2rem 1rem;display:flex;align-items:center;justify-content:center;
}

.backdrop{
  position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden;
  background:
    radial-gradient(600px 400px at 10% 10%,rgba(0,240,255,.06),transparent 8%),
    radial-gradient(500px 350px at 90% 80%,rgba(255,45,203,.05),transparent 8%);
  mix-blend-mode:screen;animation:shiftBg 18s linear infinite;
}
@keyframes shiftBg{0%{background-position:0% 0%}50%{background-position:100% 100%}100%{background-position:0% 0%}}

.container{
  position:relative;z-index:10;max-width:620px;width:100%;margin:0 auto;text-align:center;
  background:rgba(10,21,53,.3);border:1px solid var(--border-color);
  backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
  border-radius:var(--radius);padding:min(2rem,4vw);
  box-shadow:0 12px 40px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.05);
}

header{margin-bottom:1.5rem;display:flex;justify-content:space-between;gap:.75rem;align-items:flex-start}
.brand h1{
  font-family:'Orbitron',monospace;color:var(--neon-cyan);
  text-shadow:0 0 12px rgba(0,240,255,.3),0 0 24px rgba(0,240,255,.2);
  font-size:clamp(1.25rem,2.5vw,1.9rem);letter-spacing:1px;text-align:left;
}
.brand p{color:rgba(255,255,255,.65);font-size:.9rem;text-align:left}
.back-link{color:var(--neon-cyan);text-decoration:none;font-size:.9rem;transition:color .3s,text-shadow .3s}
.back-link:hover{color:#fff;text-shadow:0 0 8px var(--neon-cyan)}

.controls{display:grid;gap:.75rem;margin-bottom:1rem}
.difficulty-selector{
  display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:.75rem;
  font-family:'Orbitron',monospace;
}
.difficulty-label{color:var(--neon-yellow);font-size:.9rem;letter-spacing:.3px}

.radio-group{display:flex;align-items:center}
.radio-group input[type="radio"]{opacity:0;position:fixed;width:0;height:0}
.radio-group label{
  background-color:var(--cell-bg);padding:.45rem .9rem;border-radius:8px;
  border:1px solid var(--border-color);cursor:pointer;transition:all .25s ease;position:relative;overflow:hidden;
}
.radio-group label::before{
  content:'';position:absolute;inset:0;background:linear-gradient(45deg,var(--neon-cyan),var(--neon-magenta));
  opacity:0;transition:opacity .25s ease;z-index:-1;
}
.radio-group input[type="radio"]:checked+label{
  background-color:transparent;color:var(--bg-1);box-shadow:0 0 12px var(--neon-cyan);text-shadow:none
}
.radio-group input[type="radio"]:checked+label::before{opacity:1}
.radio-group label:hover{border-color:var(--neon-cyan);box-shadow:0 0 8px rgba(0,240,255,.5)}

.scoreboard{
  display:flex;justify-content:center;gap:.75rem;flex-wrap:wrap;margin: .25rem auto 1rem;
}
.chip{
  display:flex;align-items:center;gap:.5rem;padding:.4rem .7rem;border-radius:999px;
  border:1px solid var(--border-color);background:var(--cell-bg);
}
.score-label{font-family:'Orbitron',monospace;color:var(--neon-yellow);font-size:.85rem}
.score-value{font-weight:700;color:#fff}

.board-wrapper{position:relative;width:100%;max-width:520px;margin:0 auto;aspect-ratio:1/1;max-height:calc(100vh - 10rem)}
.board{
  display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);
  gap:clamp(6px,1.2vw,12px);width:100%;height:100%;
}

/* Buttons as cells */
.cell{
  appearance:none;-webkit-appearance:none;border:1px solid var(--border-color);
  background:var(--cell-bg);border-radius:10px;cursor:pointer;display:flex;justify-content:center;align-items:center;
  font-family:'Orbitron',monospace;font-size:clamp(1.4rem,6.2vw,3.2rem);font-weight:700;
  transition:background-color .25s, box-shadow .25s, transform .1s ease-out, outline-color .2s;
  color:#fff;user-select:none;min-width:0;min-height:0;
}
.cell:not(.x):not(.o):hover{background:var(--cell-bg-hover);box-shadow:0 0 15px rgba(0,240,255,.2);transform:translateY(-2px)}
.cell:focus-visible{outline:2px solid var(--neon-cyan);box-shadow:0 0 0 4px rgba(0,240,255,.2)}
.cell.clicked{animation:cellClick .18s ease-out}
@keyframes cellClick{0%{transform:scale(1)}50%{transform:scale(.96)}100%{transform:scale(1)}}
.cell.x{color:var(--neon-cyan);text-shadow:0 0 8px var(--neon-cyan),0 0 16px var(--neon-cyan)}
.cell.o{color:var(--neon-magenta);text-shadow:0 0 8px var(--neon-magenta),0 0 16px var(--neon-magenta)}

.winning-line{
  position:absolute;background-color:var(--neon-cyan);height:4px;border-radius:3px;display:none;
  transform-origin:center;transition:all .3s ease;z-index:5;pointer-events:none;
}
.winning-line.show{display:block}
.winning-line.o-win{background-color:var(--neon-magenta);box-shadow:0 0 12px var(--neon-magenta),0 0 24px var(--neon-magenta)}
.winning-line.x-win{background-color:var(--neon-cyan);box-shadow:0 0 12px var(--neon-cyan),0 0 24px var(--neon-cyan)}

/* Improved animations for consistent line drawing */
@keyframes lineDrawHorizontal{
  from{transform:scaleX(0)}
  to{transform:scaleX(1)}
}
@keyframes lineDrawVertical{
  from{transform:scaleY(0)}
  to{transform:scaleY(1)}
}
@keyframes lineDrawDiagonal{
  from{transform:translateY(-50%) rotate(var(--rotation)) scaleX(0)}
  to{transform:translateY(-50%) rotate(var(--rotation)) scaleX(1)}
}

/* Horizontal lines (rows) - Improved positioning */
.winning-line.win-0{
  top:calc(16.67% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-1{
  top:calc(50% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-2{
  top:calc(83.33% - 2px);left:0;width:100%;height:4px;
  transform-origin:left center;transform:scaleX(0);
}
.winning-line.win-0.show,.winning-line.win-1.show,.winning-line.win-2.show{
  animation:lineDrawHorizontal .5s cubic-bezier(0.4,0,0.2,1) forwards;
}

/* Vertical lines (columns) - Improved positioning */
.winning-line.win-3{
  left:calc(16.67% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-4{
  left:calc(50% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-5{
  left:calc(83.33% - 2px);top:0;width:4px;height:100%;
  transform-origin:center top;transform:scaleY(0);
}
.winning-line.win-3.show,.winning-line.win-4.show,.winning-line.win-5.show{
  animation:lineDrawVertical .5s cubic-bezier(0.4,0,0.2,1) forwards;
}

/* Diagonal lines - Fixed positioning and consistent animation */
.winning-line.win-6{
  width:calc(100% * 1.414);height:4px;top:50%;left:50%;
  --rotation:45deg;
  transform:translateX(-50%) translateY(-50%) rotate(45deg) scaleX(0);
  transform-origin:center;
}
.winning-line.win-7{
  width:calc(100% * 1.414);height:4px;top:50%;left:50%;
  --rotation:-45deg;
  transform:translateX(-50%) translateY(-50%) rotate(-45deg) scaleX(0);
  transform-origin:center;
}
.winning-line.win-6.show{
  animation:lineDrawHorizontal .6s cubic-bezier(0.4,0,0.2,1) forwards;
}
.winning-line.win-7.show{
  animation:lineDrawHorizontal .6s cubic-bezier(0.4,0,0.2,1) forwards;
}

.status-display{
  margin-top:1rem;font-size:clamp(1rem,2.5vw,1.15rem);color:var(--neon-yellow);
  text-shadow:0 0 6px var(--neon-yellow);min-height:2rem;letter-spacing:.5px;animation:pulseStatus 1.5s infinite alternate;
}
@keyframes pulseStatus{from{text-shadow:0 0 6px var(--neon-yellow)}to{text-shadow:0 0 12px var(--neon-yellow),0 0 24px rgba(254,252,77,.3)}}
.status-display.win{color:var(--neon-cyan);text-shadow:0 0 8px var(--neon-cyan),0 0 16px var(--neon-cyan);animation:neonGlowWin .8s infinite alternate}
.status-display.draw{color:var(--neon-magenta);text-shadow:0 0 8px var(--neon-magenta),0 0 16px var(--neon-magenta);animation:neonGlowDraw .8s infinite alternate}
@keyframes neonGlowWin{from{text-shadow:0 0 8px var(--neon-cyan),0 0 16px var(--neon-cyan)}to{text-shadow:0 0 12px var(--neon-cyan),0 0 24px var(--neon-cyan),0 0 36px rgba(0,240,255,.5)}}
@keyframes neonGlowDraw{from{text-shadow:0 0 8px var(--neon-magenta),0 0 16px var(--neon-magenta)}to{text-shadow:0 0 12px var(--neon-magenta),0 0 24px var(--neon-magenta),0 0 36px rgba(255,45,203,.5)}}

.actions{display:flex;gap:.6rem;justify-content:center;margin-top:1rem;flex-wrap:wrap}
.restart-button{
  font-family:'Orbitron',monospace;font-weight:700;font-size:1rem;color:#001019;
  background:linear-gradient(90deg,var(--neon-cyan),var(--neon-magenta));
  border:0;padding:.75rem 1.2rem;border-radius:10px;cursor:pointer;transition:transform .25s, box-shadow .25s;text-transform:uppercase;
}
.restart-button:hover{transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,240,255,.15),0 4px 15px rgba(255,45,203,.1)}
.restart-button.alt{background:linear-gradient(90deg,#9ee8ee,#ff9be8)}
.restart-button:focus-visible{outline:2px solid var(--neon-yellow);box-shadow:0 0 0 4px rgba(254,252,77,.2)}

@media (max-width:560px){
  body{padding:1rem}
  .container{padding:1rem}
}

/* Additional responsive tweaks for very small and very tall/narrow screens */
@media (max-width:420px){
  .brand h1{font-size:1.2rem}
  .brand p{font-size:.8rem}
  .controls{gap:.5rem}
  .scoreboard{gap:.5rem}
  .board-wrapper{max-width:min(92vw,420px);max-height:calc(100vh - 8.5rem)}
  .cell{font-size:clamp(1.2rem,8.5vw,2.6rem)}
  .container{padding:.75rem}
  
  /* Adjust winning line thickness for smaller screens */
  .winning-line{height:3px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:3px}
}

@media (min-height:720px) and (max-width:900px){
  /* Give the board more room on taller narrow screens */
  .board-wrapper{max-height:calc(100vh - 9rem)}
}

/* Production improvements */
@media (max-width:360px){
  .winning-line{height:2px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:2px}
}

/* High DPI display improvements */
@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){
  .winning-line{height:3px}
  .winning-line.win-3,.winning-line.win-4,.winning-line.win-5{width:3px}
}

/* Ensure winning line scales and stays visible on all screen sizes */
.board-wrapper{
  position:relative;
  isolation:isolate; /* Create stacking context */
}

/* Performance optimization - GPU acceleration for animations */
.winning-line,.cell{
  will-change:transform;
  backface-visibility:hidden;
  -webkit-backface-visibility:hidden;
}

/* Remove will-change after animations complete to optimize performance */
.winning-line:not(.show),.cell:not(.clicked){
  will-change:auto;
}

